{"ast":null,"code":"import \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport axios, { Axios } from 'axios';\nimport Cookies from 'js-cookie';\nexport default {\n  data: function data() {\n    return {\n      isLogin: false,\n      username: \"\",\n      companyIcon: \"\",\n      //企业图标\n      companyName: \"\",\n      //企业名称\n      companyType: \"\",\n      //企业性质\n      companyField: \"\",\n      //企业行业\n      companyScale: \"\",\n      //企业规模\n      companyHome: \"\",\n      //企业主页\n      companyAddress: \"\",\n      //企业地址\n      companyText: \"\",\n      //企业介绍\n      companyId: \"\",\n      recruitName: \"\",\n      //职位名称\n      recruitTag: \"\",\n      //招聘标签\n      recruitAddress: \"\",\n      //职位地址\n      salary: \"\",\n      //薪水\n      recruitNumber: \"\",\n      //招聘人数\n      recruitDegree: \"\",\n      //招聘学历\n      recruitAge: \"\",\n      //招聘年龄\n      recruitExp: \"\",\n      //工作经验\n      recruitType: \"\",\n      //招聘方式\n      recruitTime: \"\",\n      //更新时间\n      recruitTextDuty: \"\",\n      //岗位职责\n      recruitTextNeed: \"\",\n      //岗位要求\n      applyStatus: \"立即申请\",\n      applyButtonClass: \"divJob_2_1\",\n      cookieValue: \"\"\n    };\n  },\n  methods: {\n    applyForRecruit: function applyForRecruit() {\n      var that = this;\n      var cookieValue = Cookies.get('cookieUserId');\n      if (!this.isLogin) {\n        alert(\"请先登陆再进行申请！\");\n      } else {\n        //用户申请职位逻辑写于此\n        axios({\n          method: \"post\",\n          url: '/api/apply',\n          data: {\n            userId: cookieValue,\n            companyId: that.companyId,\n            recruitId: that.recruitId\n          }\n        }).then(function (response) {\n          var data = response.data;\n          var code = data.code;\n          var msg = data.msg;\n          var info = data.object;\n          if (code === 300001) {\n            console.log(data);\n            alert(msg);\n            that.applyStatus = \"已申请\";\n            that.applyButtonClass = \"divJob_2_0\";\n          } else {\n            console.log(data);\n            alert(msg);\n          }\n        });\n      }\n    },\n    formatRecruitText: function formatRecruitText(text) {\n      return text.replace(/\\n/g, '<br>');\n    }\n  },\n  mounted: function mounted() {\n    if (this.$cookie.get('cookieUserName') != null && this.$cookie.get('cookieUserName') != \"\") {\n      this.isLogin = true;\n    }\n    if (!this.isLogin) {\n      alert(\"请登陆\");\n      window.location.href = \"/index\";\n    }\n    this.username = this.$cookie.get(\"cookieUserName\");\n    var that = this;\n    this.companyId = this.$route.query.companyId;\n    this.recruitId = this.$route.query.recruitId;\n    var userId = this.$route.query.userId;\n    this.cookieValue = Cookies.get('cookieUserId');\n    axios({\n      method: 'GET',\n      url: '/api/company/getCompanyInfo/' + that.companyId //你的后端路径\n    }).then(function (response) {\n      var data = response.data;\n      var code = data.code;\n      var msg = data.msg;\n      var info = data.object;\n      if (code === 200001) {\n        //判断你的请求是否成功\n        console.log(data);\n        that.companyIcon = require('@/../dist/static/images/' + info.companyIcon);\n        that.companyName = info.companyName;\n        that.companyType = info.companyType;\n        that.companyField = info.companyField;\n        that.companyScale = info.companyScale;\n        that.companyHome = info.companyHome;\n        that.companyAddress = info.companyAddress;\n        that.companyText = info.companyText;\n      } else {\n        alert(msg);\n      }\n    }, function (error) {\n      console.log('错误', error.message);\n      // alert(error.message)\n    }), axios({\n      method: 'GET',\n      url: '/api/recruit/getRecruitInfo/' + that.companyId + '/' + that.recruitId + '/' + that.cookieValue\n    }).then(function (response) {\n      var data = response.data;\n      var code = data.code;\n      var msg = data.msg;\n      var info = data.object;\n      if (code === 200001) {\n        //判断你的请求是否成功\n        console.log(data);\n        that.recruitName = info.recruitName;\n        that.recruitTag = info.recruitTag;\n        that.recruitAddress = info.recruitAddress;\n        that.salary = info.recruitSalaryMin + \"K-\" + info.recruitSalaryMax + \"K[参考工资]\";\n        that.recruitNumber = info.recruitNumber;\n        that.recruitDegree = info.recruitDegree;\n        that.recruitAge = info.recruitAge;\n        that.recruitExp = info.recruitExp;\n        that.recruitType = info.recruitType;\n        that.recruitTime = new Date(info.recruitTime);\n        that.recruitTextDuty = info.recruitTextDuty;\n        that.recruitTextNeed = info.recruitTextNeed;\n        if (info.userId != null) {\n          that.applyStatus = \"已申请\";\n          that.applyButtonClass = \"divJob_2_0\";\n        }\n      } else {\n        alert(msg);\n      }\n    }, function (error) {\n      console.log('错误', error.message);\n      // alert(error.message)\n    });\n  },\n\n  computed: {\n    formattedDate: function formattedDate() {\n      var date = new Date(this.recruitTime);\n      return date.toLocaleString();\n    },\n    tagSplit: function tagSplit() {\n      var tags = this.recruitTag.split(\"#\");\n      return tags;\n    }\n  }\n};","map":{"version":3,"names":["axios","Axios","Cookies","data","isLogin","username","companyIcon","companyName","companyType","companyField","companyScale","companyHome","companyAddress","companyText","companyId","recruitName","recruitTag","recruitAddress","salary","recruitNumber","recruitDegree","recruitAge","recruitExp","recruitType","recruitTime","recruitTextDuty","recruitTextNeed","applyStatus","applyButtonClass","cookieValue","methods","applyForRecruit","that","get","alert","method","url","userId","recruitId","then","response","code","msg","info","object","console","log","formatRecruitText","text","replace","mounted","$cookie","window","location","href","$route","query","require","error","message","recruitSalaryMin","recruitSalaryMax","Date","computed","formattedDate","date","toLocaleString","tagSplit","tags","split"],"sources":["src/pages/page-info/components/JobInfoView.vue"],"sourcesContent":["<template>\n    <div>\n        <div class=\"compHeader\">\n            <div class=\"main\">\n                <div class=\"header_l\">\n                    <a href=\"/index\">\n                        <img src=\"/static/images/logo_1.png\" />\n                        <img src=\"/static/images/logo_2.png\" />\n                    </a>\n                    <span>www.xxx.com</span>\n                </div>\n                <div class=\"header_c\">\n                    <input name=\"\" type=\"text\" placeholder=\"请输入关键字...\" class=\"keyword\" />\n                    <input name=\"\" type=\"button\" class=\"btnsearch\" />\n                </div>\n                <div class=\"header_r\">\n                    <a href=\"/login\"> {{ username }}</a>\n                    <a href=\"/login/register\">注册</a>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"jobtypeBox\">\n            <div class=\"DivLeft\">\n                <div class=\"DivCompany\">\n                    <div class=\"DivCompany_img\"><img :src=\"companyIcon\" width=\"180\" /></div>\n                    <h1><a :href=\"'/info/company?companyId='+this.companyId\" >{{ companyName }}</a><img src=\"/static/images/16.png\" /></h1>\n                    <div class=\"clear\"></div>\n                    <div class=\"DivLeft_2\">\n                        <p>行业：{{ companyField }}</p>\n                        <p>性质：{{ companyType }}</p>\n                        <p>规模：{{ companyScale }}</p>\n                        <p>企业主页：<a href=\"\">{{ companyHome }}</a></p>\n                        <p>详细地址：{{ companyAddress }}</p>\n                        <p>{{ companyText }}</p>\n                    </div>\n                    <div class=\"clear\"></div>\n                </div>\n            </div>\n            <div class=\"DivRight\">\n                <div class=\"DivRight_2\">\n                    <div class=\"divJob_1\">\n                        <div class=\"divJob_l\">\n                            <div class=\"tit\">\n                                <h2>{{ recruitName }}</h2>\n                                <div class=\"clear\"></div>\n                            </div>\n                            <div class=\"bqbox\">\n                                <div v-for=\"(item, index)   in tagSplit\" :key=\"index\">\n                                    <label>{{ item }}</label>\n                                </div>\n                                <div class=\"clear\"></div>\n                            </div>\n                            <div class=\"jobsub\">工作地点： {{ recruitAddress }}</div>\n                            <div class=\"jobsub\">职位月薪： {{ salary }}</div>\n                            <div class=\"jobsub\">招聘人数： {{ recruitNumber }}人</div>\n                            <div class=\"jobsub\">最低学历： {{ recruitDegree }}</div>\n                            <div class=\"jobsub\">年龄要求： {{ recruitAge }}</div>\n                            <div class=\"jobsub\">工作经验： {{ recruitExp }}</div>\n                            <div class=\"jobsub\">招聘方式： {{ recruitType }}</div>\n                            <div class=\"jobsub\">刷新日期：{{ formattedDate }}</div>\n                        </div>\n                    </div>\n                    <div class=\"clear\"></div>\n                    <div class=\"divJob_2\">\n                    <button :class=\"applyButtonClass\" @click=\"applyForRecruit\">{{ applyStatus }}</button>\n                    </div>\n                    <div class=\"clear\"></div>\n                    <div class=\"divJob_3\">\n                        <b>岗位职责：</b><br />\n                        <div class=\"con\">\n                            <div v-html=\"formatRecruitText(recruitTextDuty)\"></div>\n                        </div>\n                        <b>岗位要求：</b><br />\n                        <div class=\"con\">\n                            <div v-html=\"formatRecruitText(recruitTextNeed)\"></div>\n                        </div>\n                    </div>\n                    <div class=\"clear\"></div>\n                </div>\n            </div>\n        </div>\n        <div class=\"clear\"></div>\n        <div class=\"footer\">\n        </div>\n    </div>\n</template>\n<script>\nimport axios, { Axios } from 'axios';\nimport Cookies from 'js-cookie';\nexport default {\n    data() {\n        return {\n            isLogin: false,\n\n            username:\"\",\n\n            companyIcon: \"\",//企业图标\n            companyName: \"\",//企业名称\n            companyType: \"\",//企业性质\n            companyField: \"\",//企业行业\n            companyScale: \"\",//企业规模\n            companyHome: \"\",//企业主页\n            companyAddress: \"\",//企业地址\n            companyText: \"\",//企业介绍\n            companyId:\"\",\n\n            recruitName: \"\",//职位名称\n            recruitTag: \"\",//招聘标签\n            recruitAddress: \"\",//职位地址\n            salary: \"\",//薪水\n            recruitNumber: \"\",//招聘人数\n            recruitDegree: \"\",//招聘学历\n            recruitAge: \"\",//招聘年龄\n            recruitExp: \"\",//工作经验\n            recruitType: \"\",//招聘方式\n            recruitTime: \"\",//更新时间\n            recruitTextDuty: \"\",//岗位职责\n            recruitTextNeed: \"\",//岗位要求\n            applyStatus: \"立即申请\",\n            applyButtonClass: \"divJob_2_1\",\n            cookieValue: \"\"\n        }\n    },\n    methods: {\n        applyForRecruit() {\n            let that = this;\n            const cookieValue = Cookies.get('cookieUserId');\n            if (!this.isLogin) {\n                alert(\"请先登陆再进行申请！\")\n            } else {\n                //用户申请职位逻辑写于此\n                axios({\n                method: \"post\",\n                url: '/api/apply',\n                data: {\n                    userId: cookieValue,\n                    companyId: that.companyId,\n                    recruitId: that.recruitId\n                }\n            })\n                .then(response => {\n                    let data = response.data\n                    let code = data.code\n                    let msg = data.msg\n                    let info = data.object\n                    if (code === 300001) {\n                        console.log(data)\n                        alert(msg)\n                        that.applyStatus = \"已申请\"\n                        that.applyButtonClass = \"divJob_2_0\"\n                    } else {\n                        console.log(data)\n                        alert(msg)\n                    }\n                })\n\n            }\n        },\n        formatRecruitText(text) {\n            return text.replace(/\\n/g, '<br>');\n        },\n    },\n    mounted() {\n        if (this.$cookie.get('cookieUserName') != null && this.$cookie.get('cookieUserName') != \"\") {\n            this.isLogin = true\n        }\n        if(!this.isLogin){\n            alert(\"请登陆\")\n            window.location.href = \"/index\"\n        }\n\n        this.username = this.$cookie.get(\"cookieUserName\")\n        let that = this;\n        this.companyId = this.$route.query.companyId\n        this.recruitId = this.$route.query.recruitId\n        var userId = this.$route.query.userId\n        this.cookieValue = Cookies.get('cookieUserId');\n        axios({\n            method: 'GET',\n            url: '/api/company/getCompanyInfo/' + that.companyId //你的后端路径\n        })\n            .then(response => {\n                let data = response.data\n                let code = data.code\n                let msg = data.msg\n                let info = data.object\n                if (code === 200001) { //判断你的请求是否成功\n                    console.log(data)\n                    that.companyIcon = require('@/../dist/static/images/' + info.companyIcon)\n                    that.companyName = info.companyName\n                    that.companyType = info.companyType\n                    that.companyField = info.companyField\n                    that.companyScale = info.companyScale\n                    that.companyHome = info.companyHome\n                    that.companyAddress = info.companyAddress\n                    that.companyText = info.companyText\n                } else {\n                    alert(msg)\n                }\n            }, error => {\n                console.log('错误', error.message)\n                // alert(error.message)\n            }),\n            axios({\n                method: 'GET',\n                url: '/api/recruit/getRecruitInfo/' + that.companyId + '/' + that.recruitId + '/' + that.cookieValue\n            })\n                .then(response => {\n                    let data = response.data\n                    let code = data.code\n                    let msg = data.msg\n                    let info = data.object\n                    if (code === 200001) { //判断你的请求是否成功\n                        console.log(data)\n                        that.recruitName = info.recruitName\n                        that.recruitTag = info.recruitTag\n                        that.recruitAddress = info.recruitAddress\n                        that.salary = info.recruitSalaryMin + \"K-\" + info.recruitSalaryMax + \"K[参考工资]\"\n                        that.recruitNumber = info.recruitNumber\n                        that.recruitDegree = info.recruitDegree\n                        that.recruitAge = info.recruitAge\n                        that.recruitExp = info.recruitExp\n                        that.recruitType = info.recruitType\n                        that.recruitTime = new Date(info.recruitTime)\n                        that.recruitTextDuty = info.recruitTextDuty\n                        that.recruitTextNeed = info.recruitTextNeed\n                        if (info.userId != null) {\n                            that.applyStatus = \"已申请\"\n                            that.applyButtonClass = \"divJob_2_0\"\n                        }\n                    } else {\n                        alert(msg)\n                    }\n                }, error => {\n                    console.log('错误', error.message)\n                    // alert(error.message)\n                })\n        \n    },\n    computed: {\n        formattedDate() {\n            const date = new Date(this.recruitTime);\n            return date.toLocaleString();\n        },\n        tagSplit() {\n            const tags = this.recruitTag.split(\"#\")\n            return tags;\n        }\n    },\n}\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}